<!doctype html><html class="not-ready lg:text-base" style=--bg:#faf8f1 lang=zh-cn><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>ç”¨æ ‘è“æ´¾ï¼ˆç­‰ï¼‰ä¸º USB Midi é”®ç›˜å¢æ·»è¿æ¥æ–¹å¼ - ğŸ¤ é‡‘é±¼çš„è®°å¿†ä»“åº“</title>
<meta name=theme-color><meta name=description content="æˆ‘åœ¨å»å¹´ä¹°äº†ä¸€ä¸ª M-Audio çš„ Midi é”®ç›˜ï¼Œç”¨æ¥è¿æ¥ç”µè„‘æˆ–è€… iPad å¼¹ç´ã€‚ä½†æ˜¯ç”±äºç´æ‘†æ”¾çš„ä½ç½®æ²¡æœ‰åŠæ³•æ‹‰å……ç”µçº¿ï¼Œæ‰€ä»¥æˆ‘èƒ½å¼¹ç´å¤šä¹…å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºè®¾å¤‡è¿˜æœ‰å¤šå°‘ç”µã€‚å‰ä¸€é˜µå­ä»æœ‹å‹æ‰‹é‡Œç™½å«–äº†ä¸ªæ©˜å­æ´¾ï¼Œé‰´äºåœ¨ç»ƒç´çš„æ—¶å€™å…¶å®å¹¶ä¸éœ€è¦å¤šé«˜çš„éŸ³è´¨ï¼Œæˆ‘å†³å®šç”¨è¿™ä¸ªè®¾å¤‡ç»™è‡ªå·±åšä¸€ä¸ªé’¢ç´çš„éŸ³æºã€‚
æˆ‘é¦–å…ˆä¼šä»‹ç»å¦‚ä½•é…ç½® USB Midi è®¾å¤‡å‘å‡ºå£°éŸ³ï¼Œå†ä»‹ç»å¦‚ä½•é€šè¿‡ Midi over BLE å¹¿æ’­ Midi ä¿¡å·ï¼Œæœ€åä»‹ç»å¦‚ä½•é€šè¿‡ Midi over Wifi æ¥å¹¿æ’­ Midi ä¿¡å·ã€‚
ç³»ç»Ÿé…ç½® ç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯æ©˜å­æ´¾è€Œä¸æ˜¯æ ‘è“æ´¾ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›åªæœ‰è¿™è¾¹æ‰ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œå…¶ä»–å¼€å‘æ¿å¯ä»¥é€‰æ‹©æ€§æ è¿‡æœ¬èŠ‚ã€‚
æ©˜å­æ´¾èƒ½å®‰è£…çš„æœ€æ–°ç‰ˆæœ¬ Armbian å†…æ ¸å…³é—­äº† Midi åŠŸèƒ½ã€‚åœ¨å„ç§è®ºå›ç ”ç©¶ä¸€åœˆä¹‹åï¼Œå‘ç°æ—§ç‰ˆæœ¬çš„ Armbian å†…æ ¸æ˜¯å¼€äº†çš„ï¼Œäºæ˜¯æˆ‘ä¸‹è½½äº†ä½¿ç”¨æ—§ç‰ˆå†…æ ¸çš„ç³»ç»Ÿã€‚
ï¼ˆæ³¨æ„ä½¿ç”¨æ—§ç‰ˆæœ¬ç³»ç»Ÿä»…é™äºæœ¬æ•™ç¨‹å‰åŠéƒ¨åˆ† USB Midi è®¾å¤‡ï¼Œå‡å¦‚ä½ éœ€è¦é…ç½®è“ç‰™ Midiï¼Œåˆ™å¿…é¡»è‡ªå·±ç¼–è¯‘æ–°å†…æ ¸ã€‚è¯·è‡ªå·± Google å¦‚ä½•ç¼–è¯‘ Armbianï¼Œåœ¨ç¼–è¯‘é€‰é¡¹ä¸­å¼€å¯ï¼šDevice Drivers > Sound card support > Advanced Linux Sound Architecture > Sequencer Support )
è¿›å»ä¹‹åæ­£å¸¸æ›´æ–°ç³»ç»Ÿï¼Œæ—§ç‰ˆé•œåƒè¦ä¹…ä¸€ç‚¹ã€‚æ©˜å­æ´¾è¿˜éœ€è¦åœ¨ç³»ç»Ÿä¸­å¯ç”¨å£°éŸ³ï¼Œä½¿ç”¨è‡ªå¸¦çš„é…ç½®å·¥å…· sudo armbian-configï¼Œå¯ç”¨ System > Hardware > Toggle hardware configuration > analog-codec ã€‚
ç”±äºæ©˜å­æ´¾ä¼šç­‰å¾…ç½‘ç»œæœåŠ¡æ¿€æ´»åæ‰è¿›å…¥ç³»ç»Ÿï¼Œå¯¼è‡´å¼€æœºæ—¶é—´éå¸¸é•¿ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å…³é—­å®ƒï¼š
sudo systemctl disable NetworkManager-wait-online ä½ è¿˜å¯ä»¥ä½¿ç”¨ systemd-analyze blame å‘½ä»¤æŸ¥çœ‹æœåŠ¡çš„å¯åŠ¨æ—¶é—´ï¼Œå…³é—­ä¸€äº›å…¶ä»–ä½ ä¸éœ€è¦çš„æœåŠ¡ã€‚"><meta name=author content="ğŸ¤ é‡‘é±¼çš„è®°å¿†ä»“åº“"><link rel="preload stylesheet" as=style href=https://megabits.xyz/main.min.css><script defer src=https://megabits.xyz/highlight.min.js onload=hljs.initHighlightingOnLoad()></script><link rel=preload as=image href=https://megabits.xyz/theme.png><link rel=preload as=image href=https://megabits.xyz/twitter.svg><link rel=preload as=image href=https://megabits.xyz/github.svg><link rel=preload as=image href=https://megabits.xyz/instagram.svg><link rel=icon href=https://megabits.xyz/favicon.ico><link rel=apple-touch-icon href=https://megabits.xyz/apple-touch-icon.png><meta name=generator content="Hugo 0.124.1"><meta itemprop=name content="ç”¨æ ‘è“æ´¾ï¼ˆç­‰ï¼‰ä¸º USB Midi é”®ç›˜å¢æ·»è¿æ¥æ–¹å¼"><meta itemprop=description content="æˆ‘åœ¨å»å¹´ä¹°äº†ä¸€ä¸ª M-Audio çš„ Midi é”®ç›˜ï¼Œç”¨æ¥è¿æ¥ç”µè„‘æˆ–è€… iPad å¼¹ç´ã€‚ä½†æ˜¯ç”±äºç´æ‘†æ”¾çš„ä½ç½®æ²¡æœ‰åŠæ³•æ‹‰å……ç”µçº¿ï¼Œæ‰€ä»¥æˆ‘èƒ½å¼¹ç´å¤šä¹…å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºè®¾å¤‡è¿˜æœ‰å¤šå°‘ç”µã€‚å‰ä¸€é˜µå­ä»æœ‹å‹æ‰‹é‡Œç™½å«–äº†ä¸ªæ©˜å­æ´¾ï¼Œé‰´äºåœ¨ç»ƒç´çš„æ—¶å€™å…¶å®å¹¶ä¸éœ€è¦å¤šé«˜çš„éŸ³è´¨ï¼Œæˆ‘å†³å®šç”¨è¿™ä¸ªè®¾å¤‡ç»™è‡ªå·±åšä¸€ä¸ªé’¢ç´çš„éŸ³æºã€‚
æˆ‘é¦–å…ˆä¼šä»‹ç»å¦‚ä½•é…ç½® USB Midi è®¾å¤‡å‘å‡ºå£°éŸ³ï¼Œå†ä»‹ç»å¦‚ä½•é€šè¿‡ Midi over BLE å¹¿æ’­ Midi ä¿¡å·ï¼Œæœ€åä»‹ç»å¦‚ä½•é€šè¿‡ Midi over Wifi æ¥å¹¿æ’­ Midi ä¿¡å·ã€‚
ç³»ç»Ÿé…ç½® ç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯æ©˜å­æ´¾è€Œä¸æ˜¯æ ‘è“æ´¾ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›åªæœ‰è¿™è¾¹æ‰ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œå…¶ä»–å¼€å‘æ¿å¯ä»¥é€‰æ‹©æ€§æ è¿‡æœ¬èŠ‚ã€‚
æ©˜å­æ´¾èƒ½å®‰è£…çš„æœ€æ–°ç‰ˆæœ¬ Armbian å†…æ ¸å…³é—­äº† Midi åŠŸèƒ½ã€‚åœ¨å„ç§è®ºå›ç ”ç©¶ä¸€åœˆä¹‹åï¼Œå‘ç°æ—§ç‰ˆæœ¬çš„ Armbian å†…æ ¸æ˜¯å¼€äº†çš„ï¼Œäºæ˜¯æˆ‘ä¸‹è½½äº†ä½¿ç”¨æ—§ç‰ˆå†…æ ¸çš„ç³»ç»Ÿã€‚
ï¼ˆæ³¨æ„ä½¿ç”¨æ—§ç‰ˆæœ¬ç³»ç»Ÿä»…é™äºæœ¬æ•™ç¨‹å‰åŠéƒ¨åˆ† USB Midi è®¾å¤‡ï¼Œå‡å¦‚ä½ éœ€è¦é…ç½®è“ç‰™ Midiï¼Œåˆ™å¿…é¡»è‡ªå·±ç¼–è¯‘æ–°å†…æ ¸ã€‚è¯·è‡ªå·± Google å¦‚ä½•ç¼–è¯‘ Armbianï¼Œåœ¨ç¼–è¯‘é€‰é¡¹ä¸­å¼€å¯ï¼šDevice Drivers > Sound card support > Advanced Linux Sound Architecture > Sequencer Support )
è¿›å»ä¹‹åæ­£å¸¸æ›´æ–°ç³»ç»Ÿï¼Œæ—§ç‰ˆé•œåƒè¦ä¹…ä¸€ç‚¹ã€‚æ©˜å­æ´¾è¿˜éœ€è¦åœ¨ç³»ç»Ÿä¸­å¯ç”¨å£°éŸ³ï¼Œä½¿ç”¨è‡ªå¸¦çš„é…ç½®å·¥å…· sudo armbian-configï¼Œå¯ç”¨ System > Hardware > Toggle hardware configuration > analog-codec ã€‚
ç”±äºæ©˜å­æ´¾ä¼šç­‰å¾…ç½‘ç»œæœåŠ¡æ¿€æ´»åæ‰è¿›å…¥ç³»ç»Ÿï¼Œå¯¼è‡´å¼€æœºæ—¶é—´éå¸¸é•¿ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å…³é—­å®ƒï¼š
sudo systemctl disable NetworkManager-wait-online ä½ è¿˜å¯ä»¥ä½¿ç”¨ systemd-analyze blame å‘½ä»¤æŸ¥çœ‹æœåŠ¡çš„å¯åŠ¨æ—¶é—´ï¼Œå…³é—­ä¸€äº›å…¶ä»–ä½ ä¸éœ€è¦çš„æœåŠ¡ã€‚"><meta itemprop=datePublished content="2019-08-14T00:00:00+09:00"><meta itemprop=dateModified content="2019-08-14T00:00:00+09:00"><meta itemprop=wordCount content="680"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="ç”¨æ ‘è“æ´¾ï¼ˆç­‰ï¼‰ä¸º USB Midi é”®ç›˜å¢æ·»è¿æ¥æ–¹å¼"><meta name=twitter:description content="æˆ‘åœ¨å»å¹´ä¹°äº†ä¸€ä¸ª M-Audio çš„ Midi é”®ç›˜ï¼Œç”¨æ¥è¿æ¥ç”µè„‘æˆ–è€… iPad å¼¹ç´ã€‚ä½†æ˜¯ç”±äºç´æ‘†æ”¾çš„ä½ç½®æ²¡æœ‰åŠæ³•æ‹‰å……ç”µçº¿ï¼Œæ‰€ä»¥æˆ‘èƒ½å¼¹ç´å¤šä¹…å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºè®¾å¤‡è¿˜æœ‰å¤šå°‘ç”µã€‚å‰ä¸€é˜µå­ä»æœ‹å‹æ‰‹é‡Œç™½å«–äº†ä¸ªæ©˜å­æ´¾ï¼Œé‰´äºåœ¨ç»ƒç´çš„æ—¶å€™å…¶å®å¹¶ä¸éœ€è¦å¤šé«˜çš„éŸ³è´¨ï¼Œæˆ‘å†³å®šç”¨è¿™ä¸ªè®¾å¤‡ç»™è‡ªå·±åšä¸€ä¸ªé’¢ç´çš„éŸ³æºã€‚
æˆ‘é¦–å…ˆä¼šä»‹ç»å¦‚ä½•é…ç½® USB Midi è®¾å¤‡å‘å‡ºå£°éŸ³ï¼Œå†ä»‹ç»å¦‚ä½•é€šè¿‡ Midi over BLE å¹¿æ’­ Midi ä¿¡å·ï¼Œæœ€åä»‹ç»å¦‚ä½•é€šè¿‡ Midi over Wifi æ¥å¹¿æ’­ Midi ä¿¡å·ã€‚
ç³»ç»Ÿé…ç½® ç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯æ©˜å­æ´¾è€Œä¸æ˜¯æ ‘è“æ´¾ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›åªæœ‰è¿™è¾¹æ‰ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œå…¶ä»–å¼€å‘æ¿å¯ä»¥é€‰æ‹©æ€§æ è¿‡æœ¬èŠ‚ã€‚
æ©˜å­æ´¾èƒ½å®‰è£…çš„æœ€æ–°ç‰ˆæœ¬ Armbian å†…æ ¸å…³é—­äº† Midi åŠŸèƒ½ã€‚åœ¨å„ç§è®ºå›ç ”ç©¶ä¸€åœˆä¹‹åï¼Œå‘ç°æ—§ç‰ˆæœ¬çš„ Armbian å†…æ ¸æ˜¯å¼€äº†çš„ï¼Œäºæ˜¯æˆ‘ä¸‹è½½äº†ä½¿ç”¨æ—§ç‰ˆå†…æ ¸çš„ç³»ç»Ÿã€‚
ï¼ˆæ³¨æ„ä½¿ç”¨æ—§ç‰ˆæœ¬ç³»ç»Ÿä»…é™äºæœ¬æ•™ç¨‹å‰åŠéƒ¨åˆ† USB Midi è®¾å¤‡ï¼Œå‡å¦‚ä½ éœ€è¦é…ç½®è“ç‰™ Midiï¼Œåˆ™å¿…é¡»è‡ªå·±ç¼–è¯‘æ–°å†…æ ¸ã€‚è¯·è‡ªå·± Google å¦‚ä½•ç¼–è¯‘ Armbianï¼Œåœ¨ç¼–è¯‘é€‰é¡¹ä¸­å¼€å¯ï¼šDevice Drivers > Sound card support > Advanced Linux Sound Architecture > Sequencer Support )
è¿›å»ä¹‹åæ­£å¸¸æ›´æ–°ç³»ç»Ÿï¼Œæ—§ç‰ˆé•œåƒè¦ä¹…ä¸€ç‚¹ã€‚æ©˜å­æ´¾è¿˜éœ€è¦åœ¨ç³»ç»Ÿä¸­å¯ç”¨å£°éŸ³ï¼Œä½¿ç”¨è‡ªå¸¦çš„é…ç½®å·¥å…· sudo armbian-configï¼Œå¯ç”¨ System > Hardware > Toggle hardware configuration > analog-codec ã€‚
ç”±äºæ©˜å­æ´¾ä¼šç­‰å¾…ç½‘ç»œæœåŠ¡æ¿€æ´»åæ‰è¿›å…¥ç³»ç»Ÿï¼Œå¯¼è‡´å¼€æœºæ—¶é—´éå¸¸é•¿ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å…³é—­å®ƒï¼š
sudo systemctl disable NetworkManager-wait-online ä½ è¿˜å¯ä»¥ä½¿ç”¨ systemd-analyze blame å‘½ä»¤æŸ¥çœ‹æœåŠ¡çš„å¯åŠ¨æ—¶é—´ï¼Œå…³é—­ä¸€äº›å…¶ä»–ä½ ä¸éœ€è¦çš„æœåŠ¡ã€‚"></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[4.5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold" href=https://megabits.xyz/>ğŸ¤ é‡‘é±¼çš„è®°å¿†ä»“åº“</a><div class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 -mr-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#faf8f1".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/dev-posts/>æŠ€æœ¯æ–‡ç« </a></nav><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6"><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./twitter.svg) href=https://twitter.com/Megabits_mzq target=_blank rel=me>twitter
</a><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/megabitsenmzq target=_blank rel=me>github
</a><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./instagram.svg) href=https://instagram.com/megabits_mzq target=_blank rel=me>instagram</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl px-8 pb-16 pt-12 dark:prose-invert"><article><header class=mb-16><h1 class="!my-0 pb-2.5">ç”¨æ ‘è“æ´¾ï¼ˆç­‰ï¼‰ä¸º USB Midi é”®ç›˜å¢æ·»è¿æ¥æ–¹å¼</h1><div class="text-sm antialiased opacity-60"><time>Aug 14, 2019</time></div></header><section><p>æˆ‘åœ¨å»å¹´ä¹°äº†ä¸€ä¸ª M-Audio çš„ Midi é”®ç›˜ï¼Œç”¨æ¥è¿æ¥ç”µè„‘æˆ–è€… iPad å¼¹ç´ã€‚ä½†æ˜¯ç”±äºç´æ‘†æ”¾çš„ä½ç½®æ²¡æœ‰åŠæ³•æ‹‰å……ç”µçº¿ï¼Œæ‰€ä»¥æˆ‘èƒ½å¼¹ç´å¤šä¹…å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºè®¾å¤‡è¿˜æœ‰å¤šå°‘ç”µã€‚å‰ä¸€é˜µå­ä»æœ‹å‹æ‰‹é‡Œç™½å«–äº†ä¸ªæ©˜å­æ´¾ï¼Œé‰´äºåœ¨ç»ƒç´çš„æ—¶å€™å…¶å®å¹¶ä¸éœ€è¦å¤šé«˜çš„éŸ³è´¨ï¼Œæˆ‘å†³å®šç”¨è¿™ä¸ªè®¾å¤‡ç»™è‡ªå·±åšä¸€ä¸ªé’¢ç´çš„éŸ³æºã€‚</p><p>æˆ‘é¦–å…ˆä¼šä»‹ç»å¦‚ä½•é…ç½® USB Midi è®¾å¤‡å‘å‡ºå£°éŸ³ï¼Œå†ä»‹ç»å¦‚ä½•é€šè¿‡ Midi over BLE å¹¿æ’­ Midi ä¿¡å·ï¼Œæœ€åä»‹ç»å¦‚ä½•é€šè¿‡ Midi over Wifi æ¥å¹¿æ’­ Midi ä¿¡å·ã€‚</p><h2 id=ç³»ç»Ÿé…ç½®>ç³»ç»Ÿé…ç½®</h2><p>ç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯æ©˜å­æ´¾è€Œä¸æ˜¯æ ‘è“æ´¾ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›åªæœ‰è¿™è¾¹æ‰ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œå…¶ä»–å¼€å‘æ¿å¯ä»¥é€‰æ‹©æ€§æ è¿‡æœ¬èŠ‚ã€‚</p><p>æ©˜å­æ´¾èƒ½å®‰è£…çš„æœ€æ–°ç‰ˆæœ¬ Armbian å†…æ ¸å…³é—­äº† Midi åŠŸèƒ½ã€‚åœ¨å„ç§è®ºå›ç ”ç©¶ä¸€åœˆä¹‹åï¼Œå‘ç°æ—§ç‰ˆæœ¬çš„ Armbian å†…æ ¸æ˜¯å¼€äº†çš„ï¼Œäºæ˜¯æˆ‘ä¸‹è½½äº†ä½¿ç”¨æ—§ç‰ˆå†…æ ¸çš„ç³»ç»Ÿã€‚</p><p>ï¼ˆæ³¨æ„ä½¿ç”¨æ—§ç‰ˆæœ¬ç³»ç»Ÿä»…é™äºæœ¬æ•™ç¨‹å‰åŠéƒ¨åˆ† USB Midi è®¾å¤‡ï¼Œå‡å¦‚ä½ éœ€è¦é…ç½®è“ç‰™ Midiï¼Œåˆ™å¿…é¡»è‡ªå·±ç¼–è¯‘æ–°å†…æ ¸ã€‚è¯·è‡ªå·± Google å¦‚ä½•ç¼–è¯‘ Armbianï¼Œåœ¨ç¼–è¯‘é€‰é¡¹ä¸­å¼€å¯ï¼šDevice Drivers > Sound card support > Advanced Linux Sound Architecture > Sequencer Support )</p><p>è¿›å»ä¹‹åæ­£å¸¸æ›´æ–°ç³»ç»Ÿï¼Œæ—§ç‰ˆé•œåƒè¦ä¹…ä¸€ç‚¹ã€‚æ©˜å­æ´¾è¿˜éœ€è¦åœ¨ç³»ç»Ÿä¸­å¯ç”¨å£°éŸ³ï¼Œä½¿ç”¨è‡ªå¸¦çš„é…ç½®å·¥å…· <code>sudo armbian-config</code>ï¼Œå¯ç”¨ System > Hardware > Toggle hardware configuration > analog-codec ã€‚</p><p>ç”±äºæ©˜å­æ´¾ä¼šç­‰å¾…ç½‘ç»œæœåŠ¡æ¿€æ´»åæ‰è¿›å…¥ç³»ç»Ÿï¼Œå¯¼è‡´å¼€æœºæ—¶é—´éå¸¸é•¿ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å…³é—­å®ƒï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl disable NetworkManager-wait-online
</span></span></code></pre></div><p>ä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>systemd-analyze blame</code> å‘½ä»¤æŸ¥çœ‹æœåŠ¡çš„å¯åŠ¨æ—¶é—´ï¼Œå…³é—­ä¸€äº›å…¶ä»–ä½ ä¸éœ€è¦çš„æœåŠ¡ã€‚</p><h2 id=å®‰è£…-fluidsynthhttpwwwfluidsynthorg>å®‰è£… <a href=http://www.fluidsynth.org>FluidSynth</a></h2><p>Debian æºä¸­è‡ªå¸¦çš„ FluidSynth ç‰ˆæœ¬æ¯”è¾ƒä½ï¼Œæ˜¯ 1.x çš„ã€‚ç”±äºæ—§ç‰ˆæœ¬çš„ FluidSynth å¹¶ä¸èƒ½è‡ªåŠ¨è¿æ¥ Midi è®¾å¤‡ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ç¼–è¯‘æ–°ç‰ˆã€‚</p><p>ä¸ºäº†å®‰è£…ä¾èµ–ï¼Œæˆ‘ä»¬å…ˆè¦è°ƒæ•´ apt æº,åœ¨æ–‡ä»¶ä¸­å–æ¶ˆå‡ ä¸ª deb-src æºå‰é¢çš„æ³¨é‡Šã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo nano /etc/apt/sources.list
</span></span><span style=display:flex><span>sudo apt-get update
</span></span></code></pre></div><p>å®‰è£…æ‰€æœ‰éœ€è¦çš„ä¾èµ–åŒ…ç„¶åç¼–è¯‘ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt-get build-dep fluidsynth --no-install-recommends
</span></span><span style=display:flex><span>git clone https://github.com/FluidSynth/fluidsynth
</span></span><span style=display:flex><span>cd fluidsynth/
</span></span><span style=display:flex><span>mkdir build
</span></span><span style=display:flex><span>cd build
</span></span><span style=display:flex><span>cmake ..
</span></span><span style=display:flex><span>sudo make install
</span></span></code></pre></div><p>æ¥ä¸‹æ¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ fluidsynth ç¡®è®¤æ˜¯å¦æ­£å¸¸ã€‚å¦‚æœå‡ºç°äº†æ‰¾ä¸åˆ°åº“çš„æƒ…å†µçš„è¯ï¼Œé¦–å…ˆåº”è¯¥å°è¯•æ›´æ–°é“¾æ¥åº“ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo ldconfig
</span></span></code></pre></div><p>å¦‚æœè¿™æ ·ä¸è¡Œçš„è¯ï¼Œå¯ä»¥æ·»åŠ ç¯å¢ƒå˜é‡ã€‚ï¼ˆä¸‹é¢çš„ä»£ç æ˜¯ä¸´æ—¶çš„ï¼Œæ°¸ä¹…ä¿®æ”¹å¯ä»¥è‡ªå·± Google ä¸€ä¸‹ã€‚ï¼‰</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>export LD_LIBRARY_PATH<span style=color:#f92672>=</span>/usr/local/lib:$LD_LIBRARY_PATH
</span></span></code></pre></div><p>ç¡®è®¤å¯ä»¥æ­£å¸¸è¿è¡Œä¹‹åå°±å¯ä»¥è¿›å…¥ä¸‹ä¸€æ­¥éª¤äº†ã€‚</p><p>ï¼ˆæœ¬èŠ‚å‚é˜… <a href=https://github.com/FluidSynth/fluidsynth/wiki/BuildingWithCMake>Github</a>ï¼‰</p><h2 id=è·å–-sound-font>è·å– Sound Font</h2><p>å¦‚æœä½ å°è¯•è¿‡ç›´æ¥ç”¨ apt å®‰è£… FluidSynth çš„è¯ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°å®ƒæ¨èçš„å‡ ä¸ªåŒ…ï¼šfluidr3mono-gm-soundfontã€timgm6mb-soundfontã€fluid-soundfont-gmã€‚è¿™äº›éƒ½æ˜¯ Sound Fontã€‚ä½†æ˜¯ä»–ä»¬å¯èƒ½ä¸å¤Ÿå¥½å¬ï¼Œå¹¶ä¸èƒ½è¾¾åˆ°ä½ çš„è¦æ±‚ï¼Œè¿™æ—¶å€™ä½ å°±å¯ä»¥å»ä¸€äº›ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸‹è½½ï¼Œæ¯”å¦‚ <a href=https://sites.google.com/site/soundfonts4u/>SoundFont4U</a>ã€‚</p><p>FluidSynth æ”¯æŒ SF2/SF3 æ ¼å¼çš„éŸ³æºæ–‡ä»¶ï¼Œä¸æ”¯æŒ SFZï¼Œè¯·æ³¨æ„ä¸è¦æé”™ã€‚è‡ªå·±ä¸‹è½½çš„éŸ³æºå¯ä»¥å­˜åˆ°ä¸€ä¸ªå« sound-fonts çš„æ–‡ä»¶å¤¹ä¸‹å¤‡ç”¨ï¼Œä½¿ç”¨ apt å®‰è£…çš„ä¸Šè¿°å‡ ä¸ªéŸ³æºåˆ™å®‰è£…åœ¨ /usr/share/sounds/sf2 æ–‡ä»¶å¤¹ä¸‹ã€‚</p><h2 id=æµ‹è¯•å£°éŸ³>æµ‹è¯•å£°éŸ³</h2><p>å…ˆè¿è¡Œä¸€æ¬¡æµ‹è¯•æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸å‡ºå£°ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº† GM éŸ³æºã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>fluidsynth -is -a alsa -m alsa_seq -g <span style=color:#ae81ff>5</span> -o midi.autoconnect<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> /usr/share/sounds/sf2/FluidR3_GM.sf2
</span></span></code></pre></div><p>è§£é‡Šä¸€ä¸‹å‚æ•°ï¼š</p><ul><li>a,m è¾“å…¥è¾“å‡ºä½¿ç”¨çš„éŸ³é¢‘é©±åŠ¨ã€‚</li><li>is ä½œä¸ºæœåŠ¡é™é»˜è¿è¡Œã€‚</li><li>g åŠ›åº¦é˜ˆå€¼ï¼Œè¿™é‡Œè®¾ç½®çš„å¤§ä¸€ç‚¹ï¼Œä»¥é˜²ä¸€äº›è®¾å¤‡éŸ³é‡å¤ªå°ã€‚</li><li>o ç»†èŠ‚å‚æ•°ï¼Œè¿™é‡Œè®¾ç½®äº†è‡ªåŠ¨è¿æ¥ Midi è®¾å¤‡ midi.autoconnectã€‚</li></ul><p>ï¼ˆæœ¬èŠ‚å‚é˜… <a href=https://github.com/FluidSynth/fluidsynth/wiki/UserManual>Github</a>ï¼‰</p><p>è¿è¡Œä¹‹åå¼¹ä¸€ä¸‹è¿æ¥çš„é”®ç›˜ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰å£°éŸ³ï¼Œæ¯”è¾ƒæ…¢çš„è®¾å¤‡å¯èƒ½éœ€è¦ç­‰ä¸€æ®µæ—¶é—´æ‰ä¼šæ˜¾ç¤ºå·²è¿æ¥ã€‚æŒ‰ç…§ç›®å‰çš„è®¾ç½®ï¼ŒéŸ³é‡åº”è¯¥ä¼šè›®å¤§çš„ï¼Œå¦‚æœå£°éŸ³ç‰¹åˆ«å°ï¼Œå¯ä»¥æ‰“å¼€ <code>alsamixer</code> è°ƒæ•´ä¸€ä¸‹éŸ³é‡ï¼Œå¹¶ä½¿ç”¨ <code>sudo alsactl store</code> ä¿å­˜çŠ¶æ€ã€‚ç¡®è®¤å¯ä»¥æ­£å¸¸æ¼”å¥ä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥äº†ã€‚</p><h2 id=fluidsynth-å¯åŠ¨æœåŠ¡>FluidSynth å¯åŠ¨æœåŠ¡</h2><p>ä¸ºäº†èƒ½å¤Ÿè®© FluidSynth å¼€æœºå¯åŠ¨æˆ‘ä»¬éœ€è¦è‡ªå·±å†™ä¸€ä¸ªæœåŠ¡ï¼š<code>sudo nano /etc/systemd/system/fluidsynth.service</code>ã€‚åœ¨æ–‡ä»¶ä¸­è¾“å…¥ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-systemd data-lang=systemd><span style=display:flex><span><span style=color:#66d9ef>[Unit]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Description</span><span style=color:#f92672>=</span><span style=color:#e6db74>FluidSynth Daemon</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>After</span><span style=color:#f92672>=</span><span style=color:#e6db74>sound.target</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[Service]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>EnvironmentFile</span><span style=color:#f92672>=</span><span style=color:#e6db74>/etc/fluidsynth</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ExecStart</span><span style=color:#f92672>=</span><span style=color:#e6db74>/usr/local/bin/fluidsynth -is -a alsa -m alsa_seq -z 64 -c 2 -g $GAIN -o synth.cpu-cores=4 -o midi.autoconnect=1 ${FONT_PATH}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[Install]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>WantedBy</span><span style=color:#f92672>=</span><span style=color:#e6db74>multi-user.target</span>
</span></span></code></pre></div><p>è§£é‡Šä¸€ä¸‹è¿™é‡Œå¤šå‡ºæ¥çš„å‡ ä¸ªå‚æ•°ï¼š</p><ul><li>z ç¼“å­˜å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨ 64 128 256 ç­‰â€œæ•´æ•°â€ã€‚</li><li>c ç¼“å­˜ä¸ªæ•°ï¼Œä¸€èˆ¬ä¸º 2 æˆ– 3ã€‚</li><li>o å¤šäº†ä¸€ä¸ªè®¾ç½® CPU æ ¸å¿ƒæ•°çš„é€‰é¡¹ synth.cpu-coresï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„å¼€å‘æ¿æ¥è®¾ç½®ã€‚å¯ä»¥è£…ä¸€ä¸ª htop æ•°æ¡æ¡çœ‹å‡ ä¸ªæ ¸ã€‚</li></ul><p>æ–‡ä»¶ä¸­è¿˜æŠŠéŸ³æºæ–‡ä»¶åå’ŒåŠ›åº¦æ”¾åœ¨äº†ç¯å¢ƒæ–‡ä»¶ä¸­æ–¹ä¾¿è®¾ç½®ã€‚æ–°å»ºç¯å¢ƒæ–‡ä»¶ï¼š<code>sudo nano /etc/fluidsynth</code>ï¼Œåœ¨æ–‡ä»¶ä¸­è¾“å…¥ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>FONT_PATH<span style=color:#f92672>=</span>/home/megabits/sound-fonts/SalC5Light2.sf2
</span></span><span style=display:flex><span>GAIN<span style=color:#f92672>=</span>1.5
</span></span></code></pre></div><p>è¿™ä¸ªåº”è¯¥å°±ä¸ç”¨æˆ‘å¤ªå¤šè§£é‡Šäº†ã€‚è¿™é‡Œå°†åŠ›åº¦è®¾ç½®ä¸º 1.5 æ˜¯æˆ‘è¯•å‡ºæ¥åœ¨æ©˜å­æ´¾ä¸Šæ¯”è¾ƒåˆé€‚çš„éŸ³é‡ï¼Œä½ å¯ä»¥è‡ªå·±è°ƒã€‚å‡å¦‚ä½ çš„ Midi é”®ç›˜æœ‰éŸ³é‡æ»‘æ†é‚£å°±æ›´æ–¹ä¾¿äº†ã€‚</p><p>æ¿€æ´»æœåŠ¡ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl enable fluidsynth
</span></span><span style=display:flex><span>sudo systemctl start fluidsynth
</span></span></code></pre></div><p>ä¹‹åç†è®ºä¸Šå°±åº”è¯¥èƒ½æ­£å¸¸å¼¹ç´äº†ã€‚å‡å¦‚å¬ä¸åˆ°å£°éŸ³ï¼Œå¯ä»¥ç”¨ <code>journalctl -u fluidsynth</code> æ¥æŸ¥çœ‹æœåŠ¡çš„æ—¥å¿—ï¼Œçœ‹çœ‹æ˜¯å‡ºäº†ä»€ä¹ˆé—®é¢˜ã€‚å¦‚æœä½ åªéœ€è¦ç”¨ USB æ¥è¿æ¥ä¸€ä¸‹ Midi è®¾å¤‡çš„è¯ï¼Œä¸‹é¢å°±å¯ä»¥ä¸ç”¨çœ‹äº†ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š</p><ul><li><a href=http://artteknika.hatenablog.com/entry/2017/04/28/185509>Raspberry Pi Zero ã‚’MIDIéŸ³æºãƒœãƒƒã‚¯ã‚¹åŒ–</a></li><li><a href=http://hunke.ws/posts/orange-pi-usb-midi-host/>Orange Pi USB MIDI Host</a></li></ul><h2 id=midi-over-bluetooth-low-energy>Midi over Bluetooth Low Energy</h2><p>é™¤äº†ç›´æ¥ç”¨è¿™ä¸ªåšéŸ³æºï¼Œæˆ‘è¿˜æœ‰å¸Œæœ›èƒ½å¤Ÿé€šè¿‡ BLE è½¬å‘ USB è®¾å¤‡çš„ Midi ä¿¡å·åˆ°å…¶ä»–è®¾å¤‡ä¸Šæ–¹ä¾¿è¿æ¥ã€‚é¦–å…ˆè¦ä¸‹è½½ BlueZï¼Œç”±äº BlueZ é»˜è®¤æ˜¯æ²¡æœ‰å¼€å¯ Midi åŠŸèƒ½çš„ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±ç¼–è¯‘ã€‚æ­¤å¤–è¿™é‡Œä½¿ç”¨çš„ BlueZ æ˜¯ä¸€ä¸ªç»è¿‡ä¿®æ”¹çš„ç‰ˆæœ¬ï¼Œæä¾›äº† Midi Server çš„åŠŸèƒ½ã€‚ä¸è¿‡è¿™ä¸ªç¨‹åºæœ‰ä¸€ä¸ªè›®çƒ¦äººçš„é—®é¢˜ï¼Œé‚£å°±æ˜¯æ— æ³•åŒæ—¶å‘é€éŸ³ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´å¼¹å’Œå¼¦æ—¶å€™ï¼Œå£°éŸ³æ°¸è¿œéƒ½å¯¹ä¸é½ã€‚æ‰€ä»¥è¿™ä¸ªå°±æ¨èå„ä½è‡ªå·±è€ƒè™‘ä¸€ä¸‹è¦ä¸è¦è£…å§ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git clone https://github.com/oxesoft/bluez
</span></span><span style=display:flex><span>sudo apt-get install -y autotools-dev libtool autoconf
</span></span><span style=display:flex><span>sudo apt-get install -y libasound2-dev
</span></span><span style=display:flex><span>sudo apt-get install -y libusb-dev libdbus-1-dev libglib2.0-dev libudev-dev libical-dev libreadline-dev
</span></span><span style=display:flex><span>cd bluez
</span></span><span style=display:flex><span>./bootstrap
</span></span><span style=display:flex><span>./configure --enable-midi
</span></span><span style=display:flex><span>sudo make install
</span></span></code></pre></div><p>ä¹‹åæµ‹è¯•ä¸€ä¸‹å¼€å¯æœåŠ¡ç«¯å¹¶ç”¨å…¶ä»–æ”¯æŒ Bluetooth Midi çš„è½¯ä»¶æ¥æœç´¢ï¼Œå¦‚ iOS ä¸‹çš„ Garagebandã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo btmidi-server -v -n <span style=color:#e6db74>&#34;Midi over BLE&#34;</span>
</span></span></code></pre></div><p>å¦‚æœå‡ºç°äº† <code>MGMT_OP_SET_LE failed: Not Supported</code>ï¼Œå°±è¯´æ˜è®¾å¤‡ä¸æ”¯æŒ BLEã€‚åœ¨ç¡®è®¤ä¸€åˆ‡æ­£å¸¸åæ‰“å¼€å¦å¤–ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œè¿æ¥å¥½ Midi è®¾å¤‡å¹¶æ‰«æã€‚æ³¨æ„åœ¨è¿™ä¹‹å‰è¦å…ˆç”¨åˆ«çš„è®¾å¤‡è¿æ¥ä¸Š Bluetooth Midiï¼ŒBlueZ åªæœ‰åœ¨æœ‰è®¾å¤‡è¿æ¥æ—¶æ‰ä¼šåˆ›å»º Midi é€šé“ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>aconnect -l
</span></span></code></pre></div><p>åœ¨åˆ—è¡¨ä¸­æ‰¾åˆ°ä½ è‡ªå·±çš„è“ç‰™è®¾å¤‡å’Œåˆ›å»ºçš„ &ldquo;Midi over BLE&rdquo;ã€‚æ¯”å¦‚æˆ‘çš„è¾“å‡ºç»“æœæ˜¯ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>client 0: <span style=color:#e6db74>&#39;System&#39;</span> <span style=color:#f92672>[</span>type<span style=color:#f92672>=</span>kernel<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0</span> <span style=color:#e6db74>&#39;Timer           &#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>1</span> <span style=color:#e6db74>&#39;Announce        &#39;</span>
</span></span><span style=display:flex><span>client 14: <span style=color:#e6db74>&#39;Midi Through&#39;</span> <span style=color:#f92672>[</span>type<span style=color:#f92672>=</span>kernel<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0</span> <span style=color:#e6db74>&#39;Midi Through Port-0&#39;</span>
</span></span><span style=display:flex><span>client 20: <span style=color:#e6db74>&#39;Keystation 88&#39;</span> <span style=color:#f92672>[</span>type<span style=color:#f92672>=</span>kernel,card<span style=color:#f92672>=</span>1<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0</span> <span style=color:#e6db74>&#39;Keystation 88 MIDI 1&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>1</span> <span style=color:#e6db74>&#39;Keystation 88 MIDI 2&#39;</span>
</span></span><span style=display:flex><span>client 128: <span style=color:#e6db74>&#39;Midi over BLE&#39;</span> <span style=color:#f92672>[</span>type<span style=color:#f92672>=</span>user,pid<span style=color:#f92672>=</span>2104<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0</span> <span style=color:#e6db74>&#39;Midi over BLE   &#39;</span>
</span></span></code></pre></div><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°æˆ‘çš„é”®ç›˜ &ldquo;Keystation 88&rdquo; ç¼–å·æ˜¯ 20ï¼Œ&ldquo;Midi over BLE&rdquo; é»˜è®¤ç¼–å·æ˜¯ 128ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>aconnect 20:0 128:0 
</span></span></code></pre></div><p>è¿™æ ·å°±å¯ä»¥æŠŠä¸¤ä¸ªé€šé“è¿æ¥èµ·æ¥äº†ã€‚å»é”®ç›˜ä¸ŠæŒ‰å‡ ä¸ªé”®ï¼Œçœ‹çœ‹è¿æ¥çš„è®¾å¤‡ä¼šä¸ä¼šå‘å‡ºå£°éŸ³ã€‚ä¸€åˆ‡æ­£å¸¸å°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥äº†ã€‚</p><h2 id=midi-over-ble-å¯åŠ¨æœåŠ¡>Midi over BLE å¯åŠ¨æœåŠ¡</h2><p>æ–°å»ºä¸€ä¸ªæœåŠ¡ï¼š<code>sudo nano /lib/systemd/system/btmidi.service</code>ï¼Œåœ¨æ–‡ä»¶ä¸­è¾“å…¥ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-systemd data-lang=systemd><span style=display:flex><span><span style=color:#66d9ef>[Unit]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Description</span><span style=color:#f92672>=</span><span style=color:#e6db74>MIDI Bluetooth connect</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>After</span><span style=color:#f92672>=</span><span style=color:#e6db74>bluetooth.target</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Requires</span><span style=color:#f92672>=</span><span style=color:#e6db74>bluetooth.target</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[Service]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ExecStart</span><span style=color:#f92672>=</span><span style=color:#e6db74>/usr/local/bin/btmidi-server -n &#34;Midi over BLE&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[Install]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>WantedBy</span><span style=color:#f92672>=</span><span style=color:#e6db74>multi-user.target</span>
</span></span></code></pre></div><p>æ¿€æ´»æœåŠ¡ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl enable btmidi.service
</span></span><span style=display:flex><span>sudo systemctl start btmidi.service  
</span></span></code></pre></div><p>æ¥ä¸‹æ¥é…ç½®è‡ªåŠ¨è¿æ¥ Midi é€šé“ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ udev æ¥åœ¨è“ç‰™è®¾å¤‡å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨è¿æ¥ã€‚é¦–å…ˆæ¥å†™ä¸€ä¸ªè¿æ¥è„šæœ¬ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>touch linkble.sh
</span></span><span style=display:flex><span>chmod a+x linkble.sh
</span></span><span style=display:flex><span>nano linkble.sh
</span></span></code></pre></div><p>åœ¨æ–‡ä»¶ä¸­è¾“å…¥ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>/usr/bin/aconnect <span style=color:#e6db74>&#39;Keystation 88&#39;</span>:0 128:0
</span></span></code></pre></div><p>æ³¨æ„è¿™é‡Œè¦æŠŠé”®ç›˜çš„åå­—æ”¹æˆè‡ªå·±çš„ã€‚ä¹‹æ‰€ä»¥è¦ç”¨è®¾å¤‡åæ¥è¿æ¥ï¼Œæ˜¯å› ä¸ºè®¾å¤‡ç¼–å·æ˜¯ä¸ç¨³å®šçš„ã€‚æ¥ä¸‹æ¥å»ºç«‹è§„åˆ™ <code>sudo nano /etc/udev/rules.d/44-bt.rules</code>,åœ¨æ–‡ä»¶ä¸­è¾“å…¥ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ACTION<span style=color:#f92672>==</span><span style=color:#e6db74>&#34;add|remove&#34;</span>, SUBSYSTEM<span style=color:#f92672>==</span><span style=color:#e6db74>&#34;bluetooth&#34;</span>, RUN<span style=color:#f92672>+=</span><span style=color:#e6db74>&#34;/home/user-name/linkble.sh&#34;</span>
</span></span></code></pre></div><p>åˆ·æ–°è§„åˆ™ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo udevadm control --reload-rules
</span></span></code></pre></div><p>è¿™æ ·å°±å¯ä»¥åœ¨å…¶ä»–è®¾å¤‡è¿æ¥åˆ° BLE çš„æ—¶å€™è‡ªåŠ¨è¿æ¥é€šé“äº†ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š</p><ul><li><a href=https://neuma.studio/rpi-as-midi-host.html>RASPBERRY PI 3B AS USB/BLUETOOTH MIDI HOST</a></li><li><a href=https://tttapa.github.io/Pages/Ubuntu/Software-Installation/BlueZ.html>BlueZ with MIDI over BLE Support</a></li></ul><h2 id=midi-over-wifi>Midi over Wifi</h2><p>é¦–å…ˆéœ€è¦æ¿€æ´»è™šæ‹Ÿ Midi è®¾å¤‡æ¨¡å—ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>modprobe snd-virmidi
</span></span><span style=display:flex><span>aconnect -l
</span></span></code></pre></div><p>å¦‚æœè¾“å‡ºä¸­å‡ºç°äº†å‡ ä¸ªè™šæ‹Ÿ Midi è®¾å¤‡å°±è¯´æ˜è®¾ç½®æˆåŠŸäº†ã€‚ä¸ºäº†èƒ½è®©æ¨¡å—æ°¸ä¹…å¯ç”¨ï¼Œæˆ‘ä»¬æ¥å»ºç«‹ä¸€ä¸ªé…ç½®æ–‡ä»¶ <code>sudo nano /etc/modules-load.d/snd-virmidi.conf</code>ï¼Œåœ¨æ–‡ä»¶ä¸­è¾“å…¥ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>snd-virmidi
</span></span></code></pre></div><p>ä¿å­˜å¹¶é‡å¯ã€‚</p><p>æ¥ä¸‹æ¥å®‰è£… raveloxmidiï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt-get install -y git pkg-config libasound2-dev libavahi-client-dev autoconf automake
</span></span><span style=display:flex><span>sudo apt-get install avahi-daemon
</span></span><span style=display:flex><span>git clone -b experimental https://github.com/ravelox/pimidi.git
</span></span><span style=display:flex><span>cd pimidi/raveloxmidi/ <span style=color:#f92672>&amp;&amp;</span> ./autogen.sh <span style=color:#f92672>&amp;&amp;</span> ./configure <span style=color:#f92672>&amp;&amp;</span> make -j2
</span></span><span style=display:flex><span>sudo make install
</span></span></code></pre></div><p>å‡å¦‚ä½ çš„ç½‘ç»œä¸æ”¯æŒ ipv6ï¼Œå°±éœ€è¦é…ç½®ä¸€ä¸‹ avahi-daemonï¼Œæ‰“å¼€æ–‡ä»¶ï¼š<code>sudo nano /etc/avahi/avahi-daemon.conf</code>ï¼ŒæŒ‰ç…§ä¸‹é¢çš„å€¼æ¥è®¾ç½®ï¼Œæ³¨æ„ä¸€äº›è¡Œéœ€è¦å–æ¶ˆæ³¨é‡Šã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>use-ipv6<span style=color:#f92672>=</span>no
</span></span><span style=display:flex><span>publish-addresses<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span>publish-aaaa-on-ipv4<span style=color:#f92672>=</span>no
</span></span></code></pre></div><p>æ¥ä¸‹æ¥æŸ¥çœ‹å¯ç”¨çš„è®¾å¤‡ç¼–å·ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>amidi -l
</span></span></code></pre></div><p>æ‰“å¼€ <code>aconnect -l</code> æ¥çœ‹ä¸€ä¸‹è®¾å¤‡åœ¨å…¶ä¸­çš„ç¼–å·ï¼Œçœ‹ä¸€ä¸‹ Midi é”®ç›˜çš„ç¼–å·å’Œç¬¬ä¸€ä¸ªè™šæ‹Ÿè®¾å¤‡çš„ç¼–å·ï¼Œæˆ‘çš„æ˜¯ 28:0 24:0ï¼ŒæŠŠå®ƒä»¬è¿æ¥èµ·æ¥ã€‚æ³¨æ„è¿™é‡Œçš„é¡ºåºï¼Œä¸€å®šæ˜¯æŠŠé”®ç›˜é€šé“å‘é€ç»™è™šæ‹Ÿè®¾å¤‡é€šé“ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>aconnect 28:0 24:0
</span></span></code></pre></div><p>æˆ‘è¿™é‡Œç¬¬ä¸€ä¸ªè™šæ‹Ÿ Midi è®¾å¤‡çš„ç¼–å·æ˜¯ hw:2,0ï¼Œè®°ä½è¿™ä¸ªå€¼ã€‚ä¸º raveloxmidi å»ºç«‹ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼š<code>/etc/raveloxmidi.conf</code>ï¼Œåœ¨æ–‡ä»¶ä¸­è¾“å…¥ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>alsa.input_device <span style=color:#f92672>=</span> hw:2,0
</span></span><span style=display:flex><span>network.bind_address <span style=color:#f92672>=</span> 0.0.0.0
</span></span><span style=display:flex><span>logging.enabled <span style=color:#f92672>=</span> yes
</span></span><span style=display:flex><span>logging.log_level <span style=color:#f92672>=</span> normal
</span></span></code></pre></div><p>æ¥ä¸‹æ¥å¯åŠ¨æµ‹è¯•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo raveloxmidi -dN -c /etc/raveloxmidi.conf
</span></span></code></pre></div><p>å¦‚æœç¨‹åºæ­£å¸¸è¿è¡Œäº†ä½ åº”è¯¥å°±å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹è¿æ¥å®ƒã€‚è¿™é‡Œä»¥ macOS ä¸Šçš„ Garageband ä¸ºä¾‹ï¼š</p><p>æ‰“å¼€ â€œéŸ³é¢‘ Midi éŸ³é¢‘è®¾ç½®â€ å¹¶åœ¨èœå•ä¸­æ‰“å¼€æ˜¾ç¤º â€œMidi éŸ³é¢‘å·¥ä½œå®¤â€ã€‚ä¹‹ååœ¨ â€œMidi éŸ³é¢‘å·¥ä½œå®¤â€ çš„èœå•æˆ–è€…å·¥å…·æ ä¸Šæ‰“å¼€ â€œMidi ç½‘ç»œè®¾ç½®â€ã€‚å¯ç”¨ â€œä¼šè¯1â€ã€‚åœ¨ç›®å½•ä¸­é€‰æ‹© raveloxmidiï¼Œç‚¹è¿æ¥ã€‚</p><p>æ‰“å¼€ Garageband å¼¹å‡ ä¸ªéŸ³è¯•ä¸€è¯•ï¼Œå¦‚æœæ­£å¸¸å‡ºå£°å°±æ˜¯æˆåŠŸäº†ã€‚</p><h2 id=midi-over-wifi-å¯åŠ¨æœåŠ¡>Midi over Wifi å¯åŠ¨æœåŠ¡</h2><p>æ–°å»ºä¸€ä¸ªæœåŠ¡ï¼š<code>sudo nano /etc/systemd/system/raveloxmidi.service</code>ï¼Œåœ¨æ–‡ä»¶ä¸­è¾“å…¥ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-systemd data-lang=systemd><span style=display:flex><span><span style=color:#66d9ef>[Unit]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>After</span><span style=color:#f92672>=</span><span style=color:#e6db74>local-fs.target network.target</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Description</span><span style=color:#f92672>=</span><span style=color:#e6db74>raveloxmidi RTP-MIDI network server</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[Install]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>WantedBy</span><span style=color:#f92672>=</span><span style=color:#e6db74>multi-user.target</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[Service]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>User</span><span style=color:#f92672>=</span><span style=color:#e6db74>root</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ExecStartPre</span><span style=color:#f92672>=</span><span style=color:#e6db74>/usr/bin/aconnect &#39;Keystation 88&#39;:0 24:0</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ExecStart</span><span style=color:#f92672>=</span><span style=color:#e6db74>/usr/local/bin/raveloxmidi -dN -c /etc/raveloxmidi.conf</span>
</span></span></code></pre></div><p>æ³¨æ„ Midi è®¾å¤‡çš„åç§°è¦æ”¹æˆè‡ªå·±çš„ã€‚æ¿€æ´»æœåŠ¡ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl enable raveloxmidi.service
</span></span><span style=display:flex><span>sudo systemctl start raveloxmidi.service
</span></span></code></pre></div><p>æœåŠ¡æ²¡æœ‰å¯åŠ¨æˆåŠŸä¹Ÿæ²¡å…³ç³»ï¼Œå¯èƒ½æ˜¯å› ä¸ºæˆ‘ä»¬ä¹‹å‰å·²ç»æ‰‹åŠ¨è¿æ¥è¿‡ä¸€æ¬¡ Midi è®¾å¤‡äº†ï¼Œé‡å¯è¯•è¯•å°±å¥½ã€‚</p><p>ï¼ˆæœ¬èŠ‚å‚é˜…ï¼š<a href=https://github.com/ravelox/pimidi/blob/master/FAQ.md>Github</a>ï¼‰</p><p>å‚è€ƒæ–‡ç« ï¼š</p><ul><li><a href=https://blog.tarn-vedra.de/pimidi-box/>Using a Raspberry Pi as a RTP-MIDI Gateway for macOS</a></li></ul><h2 id=åè®°>åè®°</h2><p>æœ€åæˆ‘è¿˜æ˜¯æ²¡èƒ½æŠŠè¿™äº›éƒ½è£…å¥½ï¼Œæ–°å†…æ ¸è€å†…æ ¸éƒ½æœ‰å„è‡ªçš„é—®é¢˜ï¼Œæ— æ³•ä¸¤å…¨ã€‚åœ¨æˆ‘é‡æ–°ç¼–è¯‘çš„å†…æ ¸çš„ç³»ç»Ÿä¸­ï¼Œè™½ç„¶ä¸¤è¾¹çš„ç¨‹åºéƒ½èƒ½æ­£å¸¸è¿è¡Œäº†ï¼Œä½†æ˜¯ alsa å´å¼€å§‹å®šæ—¶è¾“å‡ºä¸€äº›å™ªéŸ³ï¼Œéå¸¸çš„è¯¡å¼‚ã€‚çœŸå¿ƒæ¨èå¤§å®¶ä¸è¦è´­ä¹° Orange Pi Zeroï¼Œè¿™ä¸ªæ¿å­å¾ˆè¦äººå‘½ã€‚å‡å¦‚ä½ ç”¨çš„æ˜¯å…¶ä»–çš„æ¿å­ï¼Œé‚£æŒ‰ç…§æˆ‘çš„æ•™ç¨‹æ¥å¼„åº”è¯¥å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚</p></section></article></main><footer class="opaco mx-auto flex h-[4.5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto>&copy; 2024
<a class=link href=https://megabits.xyz/>ğŸ¤ é‡‘é±¼çš„è®°å¿†ä»“åº“</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>Powered by Hugoï¸ï¸</a>ï¸
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>âœ Paper</a></footer></body></html>